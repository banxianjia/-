{"version":3,"sources":["webpack:///D:/即时通讯VueNode学习/qianduan/App.vue?1fb9",null,"webpack:///D:/即时通讯VueNode学习/qianduan/App.vue?b728","uni-app:///main.js","webpack:///D:/即时通讯VueNode学习/qianduan/pages/chatroom/chatroom.vue?5f44","webpack:///D:/即时通讯VueNode学习/qianduan/pages/chatroom/chatroom.vue?917a","webpack:///D:/即时通讯VueNode学习/qianduan/pages/chatroom/chatroom.vue?a849","webpack:///D:/即时通讯VueNode学习/qianduan/pages/chatroom/chatroom.vue?b456","uni-app:///pages/chatroom/chatroom.vue","webpack:///D:/即时通讯VueNode学习/qianduan/pages/chatroom/chatroom.vue?4643","webpack:///D:/即时通讯VueNode学习/qianduan/pages/chatroom/chatroom.vue?92d5","uni-app:///App.vue","webpack:///D:/即时通讯VueNode学习/qianduan/App.vue?7c5b"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page"],"mappings":";;;;;;;;;AAAA;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;ACNL;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACuD;AACL;AACa;;;AAG/D;AACoN;AACpN,gBAAgB,4NAAU;AAC1B,EAAE,yEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAw0B,CAAgB,w1BAAG,EAAC,C;;;;;;;;;;;;kDCA51B;;;AAGA;AACA,qG,8FAHA;AACAA,EAAE,CAACC,iCAAH,GAAuCC,mBAAvC,CAGAC,UAAU,CAACC,iBAAD,CAAV,C;;;;;;;;;;;;;ACLA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACc;;;AAGrE;AACoN;AACpN,gBAAgB,4NAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,2KAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjCA;AAAA;AAAA;AAAA;AAA60B,CAAgB,61BAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0Cj2B;AACA,8F;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;2TAEA,EACA,IADA,kBACA,CACA,SACA,QADA,EAEA,UAFA,EAGA,aAHA,EAIA,gBAJA,EAKA,eALA,EAMA,eANA,EAOA,cAPA,EAQA,YARA,EASA,gBATA,EAUA,iBAVA,EAWA,wBAXA,EAYA,gBAZA,EAaA,SAbA,EAcA,aAdA,EAeA,YAfA,GAiBA,CAnBA,EAoBA,cACA,cADA,EApBA,EAuBA,SACA,uDACA,oBACA,qCACA,gDACA,CACA,CANA,EAvBA,EA+BA,MA/BA,oBA+BA,kBACA,gBACA,wBACA,uBACA,CAFA,EAEA,GAFA,EAGA,CApCA,EAqCA,OArCA,qBAqCA,CACA,kCADA,CACA;AACA,iEACA;AACA;AACA,GA1CA;AA2CA,SA3CA,qBA2CA;AACA;AACA,GA7CA;AA8CA;AACA;AACA,YAFA,sBAEA;AACA;AACA;AACA;AACA;AACA,wBADA;AAEA,sCAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SANA,CAMA,IANA,CAMA,IANA,GAMA,GANA;AAOA;AACA;AACA;AACA,KAvBA;AAwBA,mBAxBA,6BAwBA;AACA;AACA;AACA;AACA;AACA,OAHA,EAGA,IAHA;AAIA,KA9BA;AA+BA,mBA/BA,2BA+BA,KA/BA,EA+BA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,CAFA;;AAIA,KAtCA;AAuCA,UAvCA,kBAuCA,CAvCA,EAuCA;AACA;AACA;AACA,eADA,EACA;AACA,yBAFA;AAGA,0BAHA;AAIA,sBAJA,EAIA;AACA,+BALA;AAMA,cANA;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,CAFA;AAGA;AACA,KA1DA;AA2DA,kBA3DA,4BA2DA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,IAFA;AAGA;AACA,KAlEA;AAmEA;AACA,kBApEA,4BAoEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAPA;AAQA,KAhFA;AAiFA,WAjFA,qBAiFA;AACA;AACA,gBADA;;AAGA,KArFA;AAsFA,WAtFA,mBAsFA,IAtFA,EAsFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,EAEA,CAFA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,KApHA;AAqHA,cArHA,sBAqHA,IArHA,EAqHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,yBAFA;AAGA;AACA,2CADA;AAEA;AACA;AACA,WAJA;AAKA;AACA;AACA,WAPA,EAHA;;;AAaA,KA1IA,EA9CA,E;;;;;;;;;;;;;AC7CA;AAAA;AAAA;AAAA;AAAojD,CAAgB,wgDAAG,EAAC,C;;;;;;;;;;;ACAxkD;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;ACLL;AACA;AACA;AACA,GAHA;AAIA;AACA;AACA,GANA;AAOA;AACA;AACA,GATA;AAUA;AACA,eADA,EAVA,E;;;;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAwrC,CAAgB,2qCAAG,EAAC,C","file":"pages/chatroom/chatroom.js","sourcesContent":["// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1669800180469\n      var cssReload = require(\"C:/Program Files/HBuilderX.3.3.13.20220314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=script&lang=js&\"","import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/chatroom/chatroom.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./chatroom.vue?vue&type=template&id=4748afe6&\"\nvar renderjs\nimport script from \"./chatroom.vue?vue&type=script&lang=js&\"\nexport * from \"./chatroom.vue?vue&type=script&lang=js&\"\nimport style0 from \"./chatroom.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/chatroom/chatroom.vue\"\nexport default component.exports","export * from \"-!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatroom.vue?vue&type=template&id=4748afe6&\"","var components\ntry {\n  components = {\n    submit: function() {\n      return import(\n        /* webpackChunkName: \"components/submit/submit\" */ \"@/components/submit/submit.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatroom.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatroom.vue?vue&type=script&lang=js&\"","<template>\r\n  <view class=\"content\" :style=\"{height:contentHeight+'px'}\">\r\n    <view class=\"top-bar\">\r\n      <view class=\"top-bar-left\">\r\n        <image class=\"back-image\" src=\"../../static/images/common/back.png\" mode=\"\"></image>\r\n      </view>\r\n      <view class=\"top-bar-center\">\r\n        <view class=\"title\">\r\n          好友昵称/备注\r\n        </view>\r\n      </view>\r\n      <view class=\"top-bar-right\">\r\n        <view class=\"more-img\">\r\n          <image src=\"../../static/images/userhome/more.png\" mode=\"\"></image>\r\n        </view>\r\n      </view>\r\n    </view>\r\n    <scroll-view @scrolltoupper=\"nextPage()\" :style=\"{height:chatHeight+'px'}\" id=\"scrollView\" class=\"chat\"\r\n      scroll-y=\"true\" :scroll-with-animation=\"swanimation\" :scroll-top=\"scrollTop\">\r\n      <view class=\"chat-main\" id=\"chat-m\" :style=\"{paddingBottom:submitHeight+'px',paddingTop:tobBarHeight+'px'}\">\r\n        <view class=\"loading\" :class=\"{displaynone:!isloading}\">\r\n          <image src=\"../../static/images/common/loading.png\" :animation=\"loadinganimationData\" class=\"loading-img\"\r\n            mode=\"\"></image>\r\n        </view>\r\n        <view class=\"chat-ls\" v-for=\"(item, index) in msgs\" :key=\"index\">\r\n          <view class=\"chat-time\">{{item.time}}</view>\r\n          <view :class=\"[item.id == 'a' ?'msg-left':'msg-right']\" class=\"msg-m\">\r\n            <image class=\"user-img\" :src=\"item.imgurl\" mode=\"\"></image>\r\n            <view class=\"message\" v-if=\"item.types == 0\">{{item.message}}</view>\r\n            <view class=\"message\" v-if=\"item.types == 1\">\r\n              <image @tap=\"previewImg(item.message)\" class=\"msg-img\" :src=\"item.message\" mode=\"widthFix\"></image>\r\n            </view>\r\n          </view>\r\n        </view>\r\n        <view style=\"height: 150rpx;\"></view>\r\n      </view>\r\n    </scroll-view>\r\n    <submit @inputs=\"inputs\" @submitHeight=\"getSubmitHeight\"></submit>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\n  import Vue from '../../App.vue'\r\n  import datas from \"../../commons/js/datas.js\"\r\n  import submit from \"../../components/submit/submit.vue\"\r\n  export default {\r\n    data() {\r\n      return {\r\n        msgs: [],\r\n        imgMsg: [],\r\n        chatHeight: 0,\r\n        contentHeight: 0,\r\n        submitHeight: 0,\r\n        tobBarHeight: 0,\r\n        chatMheight: 0,\r\n        scrollTop: 0,\r\n        isloading: false,\r\n        swanimation: true,\r\n        loadinganimationData: {},\r\n        loadingsetIn: '',\r\n        nePage: 0,\r\n        canload: true,\r\n        isload: true,\r\n      };\r\n    },\r\n    components: {\r\n      submit,\r\n    },\r\n    watch: {\r\n      chatMheight: function(newValue, oldValue) {\r\n        if(oldValue != 0){\r\n          this.scrollTop = newValue - oldValue\r\n          console.log(\"this.scrollTop:\"+this.scrollTop)\r\n        }\r\n      },\r\n    },\r\n    onLoad() {\r\n      this.getMsgs(0)\r\n      setTimeout(() => {\r\n        this.scrollToBottom()\r\n      }, 100)\r\n    },\r\n    created() {\r\n      const res = uni.getSystemInfoSync(); //获取手机可使用窗口高度     api为获取系统信息同步接口\r\n      this.chatHeight = res.windowHeight - res.statusBarHeight * 2\r\n      this.contentHeight = res.screenHeight\r\n      console.log(this.chatHeight)\r\n    },\r\n    mounted() {\r\n      this.gettopbarHeight()\r\n    },\r\n    methods: {\r\n      // 渲染出下一页数据\r\n      nextPage() {\r\n        if (this.canload && this.isload) {\r\n          this.isloading = true\r\n          this.isload = false\r\n          var animation = uni.createAnimation({\r\n            duration: 1000,\r\n            timingFunction: 'step-start',\r\n          })\r\n          this.animation = animation\r\n          this.loadinganimationData = animation.export()\r\n          let i = 1;\r\n          this.loadingsetIn = setInterval(function() {\r\n            animation.rotate(i * 30).step()\r\n            this.loadinganimationData = animation.export()\r\n            i++\r\n            console.log(\"loading\")\r\n            this.getMsgs(this.nePage)\r\n          }.bind(this), 200)\r\n          this.swanimation = false\r\n          console.log(\"this.scrollTop:\"+this.scrollTop)\r\n        }\r\n      },\r\n      gettopbarHeight() {\r\n        let query = uni.createSelectorQuery().in(this)\r\n        query.select('.top-bar').boundingClientRect(data => {\r\n          this.tobBarHeight = data.height\r\n          console.log(\"data.height:\" + data.height)\r\n        }).exec()\r\n      },\r\n      getSubmitHeight(value) {\r\n        this.submitHeight = value - 50\r\n        console.log(\"this.submitHeight:\" + this.submitHeight)\r\n        setTimeout(() => {\r\n          this.scrollToBottom()\r\n        }, 0)\r\n\r\n      },\r\n      inputs(e) {\r\n        this.swanimation = true\r\n        var data = {\r\n          id: 'b', //a是好友\r\n          imgurl: 'one.png',\r\n          message: e.message,\r\n          types: e.types, //信息类型（0：文字，1：图片，......）\r\n          time: new Date() - 1000,\r\n          tip: 0\r\n        }\r\n        data.imgurl = \"../../static/images/img/\" + data.imgurl\r\n        this.msgs.push(data)\r\n        if (e.types == 1) {\r\n          this.imgMsg.push(e.message)\r\n        }\r\n        setTimeout(() => {\r\n          this.scrollToBottom()\r\n        }, 0)\r\n        console.log(e)\r\n      },\r\n      getchatMheight() {\r\n        console.log(\"begin:\"+this.chatMheight)\r\n        let query = uni.createSelectorQuery().in(this)\r\n        query.select('#chat-m').boundingClientRect(data => {\r\n          this.chatMheight = data.height\r\n        }).exec()\r\n        console.log(\"end:\"+this.chatMheight)\r\n      },\r\n      //滚动到底部\r\n      scrollToBottom() {\r\n        let query = uni.createSelectorQuery().in(this)\r\n        query.select('#scrollView').boundingClientRect()\r\n        query.select('#chat-m').boundingClientRect()\r\n        query.exec((res) => {\r\n          //如果子元素高度大于父元素高度(显示高度)\r\n          if (res[1].height > res[0].height) {\r\n            //计算出二者差值就是需要滚动的距离\r\n            this.scrollTop = res[1].height - res[0].height + 30 + this.submitHeight\r\n            // console.log(\"this.scrollTop:\" + this.scrollTop)\r\n          }\r\n        })\r\n      },\r\n      backOne() {\r\n        uni.navigateBack({\r\n          delta: 1\r\n        })\r\n      },\r\n      getMsgs(page) {\r\n        let msg = datas.message()\r\n        console.log('page:' + page)\r\n        var maxMsg = (page + 1) * 10\r\n        var startMsg = page * 10\r\n        console.log(maxMsg + \"?\" + msg.length)\r\n        console.log(this.canload)\r\n        if (maxMsg > msg.length) {\r\n          maxMsg = msg.length\r\n          this.canload = false\r\n        }\r\n        for (var i = startMsg; i < maxMsg; i++) {\r\n          msg[i].imgurl = \"../../static/images/img/\" + msg[i].imgurl\r\n          if (msg[i].types == 1) {\r\n            msg[i].message = \"../../static/images/img/\" + msg[i].message\r\n            this.imgMsg.unshift(msg[i].message)\r\n          }\r\n          this.msgs.unshift(msg[i])\r\n        }\r\n        this.nePage = this.nePage+1\r\n        clearInterval(this.loadingsetIn)\r\n        setTimeout(()=>{\r\n          this.getchatMheight()\r\n        },0)\r\n        console.log(\"load-close\")\r\n        this.isloading = false\r\n        this.isload = true\r\n        // this.$nextTick(function(){\r\n        //   this.scrollToBottom()\r\n        // })\r\n      },\r\n      previewImg(flag) {\r\n        let index;\r\n        for (var i = 0; i < this.imgMsg.length; i++) {\r\n          if (flag == this.imgMsg[i]) {\r\n            index = i\r\n            break\r\n          }\r\n        }\r\n        uni.previewImage({\r\n          current: index,\r\n          urls: this.imgMsg,\r\n          longPressActions: {\r\n            itemList: ['发送给朋友', '保存图片', '收藏'],\r\n            success: function(data) {\r\n              console.log('选中了第' + (data.tapIndex + 1) + '个按钮,第' + (data.index + 1) + '张图片');\r\n            },\r\n            fail: function(err) {\r\n              console.log(err.errMsg);\r\n            }\r\n          }\r\n        });\r\n      }\r\n    }\r\n  }\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n  @import \"../../commons/css/mycss.scss\";\r\n\r\n\r\n  .top-bar,\r\n  page {\r\n    background: #F4F4F4;\r\n  }\r\n\r\n  .displaynone {\r\n    display: none;\r\n  }\r\n\r\n  .chat {\r\n    width: 100%;\r\n    margin-top: 100rpx;\r\n    margin-bottom: 100rpx;\r\n    box-sizing: border-box;\r\n\r\n    .loading {\r\n      text-align: center;\r\n\r\n      .loading-img {\r\n        width: 60rpx;\r\n        height: 60rpx;\r\n      }\r\n    }\r\n\r\n    .chat-ls {\r\n      margin-top: 32rpx;\r\n      margin-left: 32rpx;\r\n      margin-right: 32rpx;\r\n      box-sizing: border-box;\r\n\r\n      .chat-time {\r\n        text-align: center;\r\n        font-family: PingFangSC-Regular;\r\n        font-size: 12px;\r\n        color: rgba(39, 40, 50, 0.30);\r\n        letter-spacing: -0.41px;\r\n        font-weight: 400;\r\n      }\r\n\r\n      .msg-m {\r\n        display: flex;\r\n        margin-top: 56rpx;\r\n\r\n        .user-img {\r\n          width: 40px;\r\n          height: 40px;\r\n          border-radius: 10px;\r\n        }\r\n\r\n        .message {\r\n          flex: none;\r\n          max-width: 480rpx;\r\n          word-wrap: break-word;\r\n          box-sizing: border-box;\r\n          padding: 16rpx 24rpx;\r\n          margin: 0 20rpx;\r\n          font-family: PingFangSC-Regular;\r\n          font-size: 16px;\r\n          line-height: 45rpx;\r\n          color: #272832;\r\n          letter-spacing: 2rpx;\r\n\r\n          .msg-img {\r\n            max-width: 400rpx;\r\n            border-radius: $uni-border-radius-base;\r\n          }\r\n        }\r\n      }\r\n\r\n      .msg-left {\r\n        flex-direction: row;\r\n\r\n        .message {\r\n          border-radius: 0 10px 10px 10px;\r\n          background: #FFFFFF;\r\n        }\r\n      }\r\n\r\n      .msg-right {\r\n        flex-direction: row-reverse;\r\n\r\n        .message {\r\n          border-radius: 10px 0px 10px 10px;\r\n          background: #FFE431;\r\n        }\r\n      }\r\n    }\r\n  }\r\n</style>\n","import mod from \"-!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatroom.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./chatroom.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1669800180887\n      var cssReload = require(\"C:/Program Files/HBuilderX.3.3.13.20220314.full/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","<script>\r\n\texport default {\r\n\t\tonLaunch: function() {\r\n\t\t\tconsole.log('App Launch')\r\n\t\t},\r\n\t\tonShow: function() {\r\n\t\t\tconsole.log('App Show')\r\n\t\t},\r\n\t\tonHide: function() {\r\n\t\t\tconsole.log('App Hide')\r\n\t\t},\r\n    globalData:{\r\n      userMsg: {},\r\n    }\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t/*每个页面公共css */\r\n</style>\n","import mod from \"-!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Program Files\\\\HBuilderX.3.3.13.20220314.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./App.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}